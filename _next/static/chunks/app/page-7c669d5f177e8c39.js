(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5842:function(e,a,r){Promise.resolve().then(r.bind(r,6359))},6359:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return c}});var t=r(7437),s=r(2265),l=e=>{let{simOptions:a,submitting:r,setSimOptions:s,setSubmitting:l,handleSubmit:n,messageText:i}=e;function d(e){return e.replace(/^0+(?=\d)/,"")}return(0,t.jsx)("div",{className:"font-semibold text-sm w-96 p-4 bg-card border border-card-border rounded-xl",children:(0,t.jsx)("form",{autoComplete:"off",className:"",onSubmit:n,children:(0,t.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"START EQUITY"}),(0,t.jsx)("input",{maxLength:"12",className:"py-3 px-5 w-36 rounded-xl text-sm bg-card-inside border border-card-border",id:"startequity",onClick:()=>startequity.select(),type:"text",value:"€"+a.startEquity,onChange:e=>{let r=e.target.value.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".");s({...a,startEquity:d(r)})}})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"WIN PROBABILITY"}),(0,t.jsx)("input",{maxLength:"3",id:"winrate",onClick:()=>winrate.select(),type:"text",className:"py-3 px-5 w-20 rounded-xl text-sm bg-card-inside border border-card-border",value:a.winRate+"%",onChange:e=>{let r=e.target.value;"deleteContentBackward"===e.nativeEvent.inputType&&(r=r.slice(0,-1)),r=r.replace(/\D/g,""),s({...a,winRate:d(r)})},placeholder:"",required:!0})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"WIN/LOSS RELATION"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4 rounded-xl text-sm border border-card-border overflow-hidden",children:[(0,t.jsx)("input",{maxLength:"4",id:"winlossrelation",onClick:()=>winlossrelation.select(),type:"text",className:"rounded-l-[10px] py-3 w-20 px-5 bg-card-inside",value:a.winLossRelation,onChange:e=>{let r=e.target.value;(r=(r=r.replace(/\./g,",")).replace(/[^\d,]/g,"")).split(",").length-1>1&&(r=r.replace(/,/g,(e,a)=>a===r.indexOf(",")?".":""));let t=parseFloat(r.replace(",","."));!isNaN(t)&&t>999&&(r="999"),s({...a,winLossRelation:d(r)})},placeholder:"",required:!0}),(0,t.jsx)("span",{className:"whitespace-nowrap pr-4 bg-card",children:": 1"})]})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"NUMBER OF TRADES"}),(0,t.jsx)("input",{maxLength:"3",id:"tradesnumber",onClick:()=>tradesnumber.select(),type:"text",className:"py-3 px-5 w-20 rounded-xl text-sm bg-card-inside border border-card-border",value:a.tradesNumber,onChange:e=>{let r=e.target.value;r=r.replace(/\D/g,""),s({...a,tradesNumber:d(r)})},placeholder:"",required:!0})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"NUMBER OF LINES"}),(0,t.jsx)("input",{maxLength:"2",id:"linesnumber",onClick:()=>linesnumber.select(),type:"text",className:"py-3 px-5 w-16 rounded-xl text-sm bg-card-inside border border-card-border",value:a.linesNumber,onChange:e=>{let r=e.target.value;r=r.replace(/\D/g,""),s({...a,linesNumber:d(r)})},placeholder:"",required:!0})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"whitespace-nowrap",children:"RISK PER TRADE"}),(0,t.jsxs)("div",{className:"flex border border-card-border rounded-xl",children:[(0,t.jsx)("input",{maxLength:"percentage"===a.riskPerTrade.measure?"4":"11",id:"riskpertrade",onClick:()=>riskpertrade.select(),type:"text",className:"py-3 px-5 rounded-l-[10px] text-sm bg-card-inside "+("percentage"===a.riskPerTrade.measure?"w-20":"w-32"),value:a.riskPerTrade.value,onChange:e=>{let r=e.target.value;if("percentage"==a.riskPerTrade.measure){(r=(r=r.replace(/\./g,",")).replace(/[^\d,]/g,"")).split(",").length-1>1&&(r=r.replace(/,+/g,(e,a)=>a===r.indexOf(",")?",":""));let e=parseFloat(r.replace(",","."));!isNaN(e)&&e>=100&&(r="99")}else r=r.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,".");s({...a,riskPerTrade:{...a.riskPerTrade,value:d(r)}})},placeholder:"",required:!0}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("select",{value:a.riskPerTrade.measure,className:"appearance-none py-3 px-5 w-16 rounded-r-xl text-sm bg-transparent",onChange:e=>{s({...a,riskPerTrade:{value:"0",measure:e.target.value}})},children:[(0,t.jsx)("option",{value:"percentage",children:"%"}),(0,t.jsx)("option",{value:"currency",children:"€"})]}),(0,t.jsx)("div",{className:"absolute inset-y-0 -right-2 flex items-center pr-4 pointer-events-none",children:(0,t.jsx)("svg",{className:"h-6 w-6 fill-current text-gray-500 transform transition-transform",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{d:"M8 7l4 4 4-4"})})})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"w-48",children:i}),(0,t.jsx)("button",{className:"py-3 px-4 inline-flex justify-center items-center gap-2 rounded-md border border-transparent font-semibold bg-[#07ff11] text-white hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all text-sm dark:focus:ring-offset-gray-800",type:"submit",children:r?"Caricando Dati...":"Carica"})]})]})})})},n=r(1196),i=r(6136);i.kL.register(i.WV,i.uw,i.f$,i.od,i.jn,i.ST,i.u,i.De);var d=(0,s.memo)(e=>{let{scale:a,data:r}=e;return(0,t.jsx)(n.kL,{options:{plugins:{legend:{display:!1},tooltip:{enabled:!1}},scales:{x:{grid:{display:!1}},y:{grid:{color:"#4c4a5e"},type:a}},elements:{point:{}}},data:r})}),c=()=>{let[e,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)("TESTO WARNING DI PROVA"),[i,c]=(0,s.useState)("linear"),[o,u]=(0,s.useState)({startEquity:"10.000",winRate:"50",winLossRelation:"1",tradesNumber:"20",linesNumber:"10",riskPerTrade:{value:"1",measure:"percentage"}}),[x,p]=(0,s.useState)({kelly:"",expected:"",maxDrawdown:"",avgMaxDrawdown:"",minEquity:"",maxEquity:"",avgPerformance:"",reomd:"",maxConsecutiveWin:"",maxConsecutiveLoss:""});class m{constructor(e,a){this.backgroundColor=e,this.borderColor=e,this.data=a,this.type="line",this.pointStyle=!1}}let[h,b]=(0,s.useState)({datasets:[new m("#fff",[])],labels:[]}),g=e=>{let a=(e=Math.round(e)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return e>=0?"€".concat(a):"-€".concat(a.slice(1))},w=[{label:"Kelly",value:x.kelly},{label:"Expected",value:x.expected},{label:"Biggest Max Drawdown",value:x.maxDrawdown},{label:"Average Max Drawdown",value:x.avgMaxDrawdown},{label:"Minimum Equity",value:x.minEquity},{label:"Maximum Equity",value:x.maxEquity},{label:"Average Performance",value:x.avgPerformance},{label:"Return on Max Drawdown",value:x.reomd},{label:"Max Consecutive Win",value:x.maxConsecutiveWin},{label:"Max Consecutive Loss",value:x.maxConsecutiveLoss}];return(0,s.useEffect)(()=>{Object.keys(o).forEach(e=>{if("riskPerTrade"==e&&""==o.riskPerTrade.value){u({...o,riskPerTrade:{...o.riskPerTrade,value:"0"}});return}""==o[e]&&u({...o,[e]:"0"})})},[o]),(0,t.jsx)("main",{children:(0,t.jsxs)("div",{className:"px-8 mt-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold py-4",children:"Equity Curve Simulator"}),(0,t.jsxs)("div",{className:"flex gap-x-8 justify-center",children:[(0,t.jsx)("div",{children:(0,t.jsx)(l,{simOptions:o,submitting:e,setSimOptions:u,setSubmitting:a,handleSubmit:e=>{e.preventDefault();let r=()=>{let e=()=>{let e;return(e="percentage"==o.riskPerTrade.measure?s/100*r:s,Math.random()<o.winRate/100)?(r=Math.round(r+e*l),1):(r=Math.round(r-e),0)},a=[],r=t,n=0,p=0,m=0,b=0,g=0;a.push(r);for(let s=0;s<parseInt(o.tradesNumber);s++){let s=e();a.push(r);let l=r/t*100-100;l<n&&(n=-1*l),r<d?d=r:r>c&&(c=r),1==s?(++m>g&&(g=m),p=0):(++p>b&&(b=p),m=0)}return i.push(n),u.push(r/t*100-100),x.push(g),h.push(b),a};a(!0);let t=parseInt(o.startEquity.replaceAll(".","")),s=parseInt(o.riskPerTrade.value.replace(/\./g,"").replace(/,/g,".")),l=parseInt(o.winLossRelation.replace(/,/g,"."));if("currency"==o.riskPerTrade.measure&&s>t){n("TOO HIGH RISK");return}n("TUTTO A POSTO");let i=[],d=t,c=t,u=[],x=[],h=[],w=[];for(let e=0;e<parseInt(o.linesNumber);e++)w.push(r());b({datasets:w.map(e=>new m("#"+Math.random().toString(16).slice(-6),e)),labels:[...Array(parseInt(o.tradesNumber)+1).keys()]});let f=(o.winRate/100*l-(1-o.winRate/100)).toFixed(2),v=Math.max.apply(Math,i).toFixed(2),N=Math.round(i.reduce((e,a)=>e+a,0)/i.length||0).toFixed(2),y=Math.round(u.reduce((e,a)=>e+a,0)/u.length||0).toFixed(2),j=0!=v?(y/v).toFixed(2):"",k=Math.max.apply(Math,x),T=Math.max.apply(Math,h);p({kelly:(()=>{let e=(o.winRate/100-(1-o.winRate/100)/l).toFixed(2);return isFinite(e)?e:""})(),expected:f,maxDrawdown:v+"%  | "+g(v/100*t),avgMaxDrawdown:N+"%",minEquity:g(d),maxEquity:g(c),avgPerformance:y+"%  | "+g(y/100*t),reomd:j,maxConsecutiveWin:k,maxConsecutiveLoss:T}),a(!1)},messageText:r})}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"float-right",children:(0,t.jsxs)("div",{className:"flex border border-card-border rounded-lg overflow-hidden",children:[(0,t.jsx)("button",{onClick:()=>c("linear"),className:"align-middle select-none font-bold text-center transition-all text-xs py-3 px-6 "+("linear"==i?"bg-card-inside":"hover:shadow-inner-xl hover:shadow-card transition-shadows duration-300"),type:"button",children:"NORMAL"}),(0,t.jsx)("button",{onClick:()=>c("logarithmic"),className:"align-middle select-none font-bold text-center transition-all text-xs py-3 px-6 "+("logarithmic"==i?"bg-card-inside":"hover:shadow-inner-xl hover:shadow-card transition-shadows duration-300"),type:"button",children:"LOGARITHMIC"})]})}),(0,t.jsx)(d,{scale:i,data:h}),(0,t.jsx)("span",{className:"float-right font-bold text-3xl",children:"BLASTRADE.COM"})]})]}),(0,t.jsx)("div",{className:"py-8 text-sm font-semibold",children:(0,t.jsx)("div",{className:"bg-card border border-card-border rounded-lg w-full overflow-scroll",children:(0,t.jsx)("table",{className:"",children:(0,t.jsxs)("tbody",{children:[(0,t.jsx)("tr",{className:"border-b border-card-border",children:w.map((e,a)=>(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4",children:e.label},a))}),(0,t.jsx)("tr",{className:"h-14 overflow-hidden",children:w.map((e,a)=>(0,t.jsx)("td",{className:"whitespace-nowrap px-6 py-4 font-medium",children:e.value},a))})]})})})})]})})}}},function(e){e.O(0,[674,796,971,69,744],function(){return e(e.s=5842)}),_N_E=e.O()}]);